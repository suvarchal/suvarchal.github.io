import{K as v,L as O,G as $,p as M,z,r as j}from"./modules/vue-CoEReDeK.js";import{K as C}from"./index-q-_ThpBa.js";const x=e=>{if(e==null)return null;if(typeof e=="number"&&Number.isFinite(e))return`${e}px`;if(typeof e=="string"){const t=e.trim();if(!t)return null;const a=Number(t);return Number.isNaN(a)?t:`${a}px`}return null},h=e=>{if(e&&typeof e=="object"&&!Array.isArray(e)){const t=e.body??e.base??e.default;return x(t)}return x(e)};function E(e,t,a={}){const{$slidev:c}=C(),s=typeof window<"u",u=j(""),F=z(()=>c?.configs||{}),w=z(()=>c?.nav?.currentSlideRoute?.meta?.slide?.frontmatter||{}),d=z(()=>{const r=h(w.value?.fontsize);return r||h(F.value?.fontsize)}),A=z(()=>!!d.value);let f,b,l=null;const m=()=>{l!==null&&s&&(cancelAnimationFrame(l),l=null)},N=()=>{if(!s)return;const r=e.value,i=t.value;if(!r||!i)return;if(m(),d.value){u.value=d.value;return}u.value="",i.style.fontSize="";const p=parseFloat(window.getComputedStyle(i).fontSize||"16");if(Number.isNaN(p)){u.value="";return}let o=p;const S=a.minFontSizePx??Math.max(12,Math.round(p*.6)),g=80;let y=0;for(;y<g&&(i.scrollHeight>r.clientHeight||i.scrollWidth>r.clientWidth);){if(o-=1,o<=S){o=S;break}i.style.fontSize=`${o}px`,y+=1}i.style.fontSize=`${o}px`,u.value=`${o}px`},n=()=>{s&&(m(),M(()=>{m(),l=requestAnimationFrame(()=>{N(),l=null})}))};return v(d,()=>{n()},{immediate:!0}),v(()=>c?.nav?.currentPage,()=>{n()}),v(()=>c?.nav?.clicks,()=>{n()}),v(()=>[e.value,t.value],()=>{n()}),O(()=>{s&&(n(),window.addEventListener("resize",n),typeof ResizeObserver<"u"&&(f=new ResizeObserver(()=>n()),e.value&&f.observe(e.value),t.value&&f.observe(t.value)),typeof MutationObserver<"u"&&t.value&&(b=new MutationObserver(()=>n()),b.observe(t.value,{childList:!0,subtree:!0,characterData:!0})))}),$(()=>{s&&(window.removeEventListener("resize",n),f?.disconnect(),b?.disconnect(),m())}),{fontSize:u,isExplicit:A}}export{E as u};
